# Python-File-Handling

### درس: التعامل مع الملفات في بايثون

في هذا الدرس، سنتعلم كيفية التعامل مع الملفات في بايثون باستخدام الدالة الأساسية `open()`. تعد معالجة الملفات من الأمور الهامة في أي تطبيق برمجي، حيث نحتاج في العديد من الأحيان إلى قراءة البيانات من الملفات أو تخزينها فيها.

#### **أهمية التعامل مع الملفات:**
التعامل مع الملفات يسمح لك بحفظ البيانات التي يقوم برنامجك بتوليدها للاستخدام في المستقبل، أو بقراءة البيانات من ملفات خارجية. يتم استخدام الملفات عادة لتخزين المعلومات النصية أو الملفات الثنائية مثل الصور والفيديوهات.

### **الدالة الأساسية: `open()`**
الدالة `open()` في بايثون هي المفتاح للتعامل مع الملفات. هذه الدالة تأخذ معلمين رئيسيين:
1. **اسم الملف**: يشير إلى اسم الملف الذي تريد فتحه.
2. **وضع فتح الملف** (mode): يشير إلى كيفية التعامل مع الملف، سواء للقراءة أو الكتابة أو الإلحاق بالمحتوى.

### **الأوضاع المختلفة لفتح الملفات:**
هناك عدة أوضاع يمكنك من خلالها فتح الملفات:

1. **"r" - قراءة (Read)**: هذا هو الوضع الافتراضي. يفتح الملف للقراءة فقط، ويعطي خطأ إذا كان الملف غير موجود.
   
2. **"a" - إلحاق (Append)**: يفتح الملف للإلحاق بالمحتوى، أي إضافة بيانات جديدة إلى نهاية الملف. إذا كان الملف غير موجود، يتم إنشاؤه.

3. **"w" - كتابة (Write)**: يفتح الملف للكتابة. إذا كان الملف موجودًا بالفعل، سيتم مسح محتوياته وكتابة بيانات جديدة عليه. وإذا لم يكن الملف موجودًا، سيتم إنشاؤه.

4. **"x" - إنشاء (Create)**: يقوم بإنشاء ملف جديد. إذا كان الملف موجودًا مسبقًا، سيتم إرجاع خطأ.

#### **أوضاع النص والثنائي:**
- **"t" - نص (Text)**: هذا هو الوضع الافتراضي، ويستخدم للتعامل مع النصوص.
- **"b" - ثنائي (Binary)**: يستخدم للتعامل مع الملفات الثنائية مثل الصور والفيديوهات.

### **أمثلة على فتح الملفات:**

#### 1. **فتح ملف للقراءة:**
يمكنك فتح ملف وقراءته باستخدام الوضع الافتراضي "r":
```python
f = open("demofile.txt", "r")
print(f.read())
f.close()
```
هنا نقوم بفتح الملف `demofile.txt` وقراءة محتوياته باستخدام الدالة `read()`.

#### 2. **فتح ملف للإلحاق:**
```python
f = open("demofile.txt", "a")
f.write("Adding new content to the file.\n")
f.close()
```
هذا المثال يفتح الملف للإلحاق ويضيف سطرًا جديدًا إلى نهاية الملف.

#### 3. **فتح ملف للكتابة:**
```python
f = open("demofile.txt", "w")
f.write("This will overwrite the content.")
f.close()
```
هنا نقوم بفتح الملف للكتابة، وإذا كان الملف موجودًا، سيتم مسح محتوياته القديمة وكتابة بيانات جديدة عليه.

#### 4. **إنشاء ملف جديد:**
```python
f = open("newfile.txt", "x")
f.write("This is a new file.")
f.close()
```
هذا المثال يقوم بإنشاء ملف جديد باسم `newfile.txt`. إذا كان الملف موجودًا بالفعل، سيحدث خطأ.

### **قراءة محتويات الملفات بطرق مختلفة:**

#### **قراءة النص بالكامل:**
```python
f = open("demofile.txt", "r")
print(f.read())
f.close()
```
نقوم هنا بقراءة كامل محتويات الملف باستخدام `read()`.

#### **قراءة عدد معين من الأحرف:**
يمكنك تحديد عدد الأحرف التي ترغب في قراءتها باستخدام الدالة `read(عدد الأحرف)`:
```python
f = open("demofile.txt", "r")
print(f.read(10))  # قراءة أول 10 أحرف
f.close()
```

#### **قراءة سطر واحد:**
يمكنك استخدام `readline()` لقراءة سطر واحد من الملف:
```python
f = open("demofile.txt", "r")
print(f.readline())
f.close()
```

#### **قراءة الملف سطرًا سطرًا باستخدام حلقة:**
```python
f = open("demofile.txt", "r")
for line in f:
    print(line)
f.close()
```
باستخدام حلقة `for`، يمكنك قراءة كل سطر من الملف بشكل منفصل.

### **التعامل مع الملفات الثنائية:**

إذا كنت تريد التعامل مع ملفات ثنائية مثل الصور أو الفيديوهات، يجب استخدام الوضع `"b"` لفتح الملف في الوضع الثنائي:
```python
f = open("image.jpg", "rb")
data = f.read()
f.close()
```
بهذه الطريقة، يمكنك قراءة البيانات الثنائية من الملفات.

### **إغلاق الملفات:**
من المهم دائمًا إغلاق الملفات بعد الانتهاء منها لتحرير الموارد المستخدمة. يتم ذلك باستخدام `close()`:
```python
f = open("demofile.txt", "r")
# قم ببعض العمليات على الملف
f.close()
```

#### **إغلاق الملفات تلقائيًا باستخدام `with`:**
باستخدام `with`، يتم فتح وإغلاق الملف تلقائيًا دون الحاجة إلى استدعاء `close()` يدويًا:
```python
with open("demofile.txt", "r") as f:
    print(f.read())
```

### **مقارنة الأوضاع المختلفة:**

| الوضع        | الوصف                                          | ماذا يحدث إذا كان الملف غير موجود؟        |
|--------------|------------------------------------------------|-------------------------------------------|
| **"r"**      | يفتح الملف للقراءة فقط                         | يعيد خطأ                                 |
| **"a"**      | يفتح الملف للإلحاق بالمحتوى                    | ينشئ ملفًا جديدًا إذا لم يكن موجودًا      |
| **"w"**      | يفتح الملف للكتابة (ويكتب فوق المحتويات السابقة) | ينشئ ملفًا جديدًا إذا لم يكن موجودًا      |
| **"x"**      | ينشئ ملفًا جديدًا                              | يعيد خطأ إذا كان الملف موجودًا بالفعل     |
| **"t"**      | نص (الوضع الافتراضي للتعامل مع النصوص)         | يتم التعامل مع الملف كملف نصي            |
| **"b"**      | ثنائي (يستخدم للصور والملفات الثنائية)          | يتم التعامل مع الملف كملف ثنائي           |


لحذف ملف في بايثون، يجب عليك استيراد وحدة `os` واستخدام الدالة `os.remove()` لحذف الملف.

### مثال:
لحذف الملف "demofile.txt"، يمكنك استخدام الكود التالي:

```python
import os
os.remove("demofile.txt")
```

### التحقق من وجود الملف:
لتجنب حدوث خطأ في حال كان الملف غير موجود، من الأفضل التحقق من وجوده قبل محاولة حذفه:

### مثال:
التحقق من وجود الملف قبل حذفه:

```python
import os
if os.path.exists("demofile.txt"):
  os.remove("demofile.txt")
else:
  print("الملف غير موجود")
```

### حذف مجلد:
لحذف مجلد كامل، يمكنك استخدام الدالة `os.rmdir()`:

### مثال:
لحذف المجلد "myfolder"، يمكنك استخدام الكود التالي:

```python
import os
os.rmdir("myfolder")
```

**ملاحظة:** يمكنك فقط حذف المجلدات الفارغة.

### **خلاصة الدرس:**
في هذا الدرس تعلمنا كيفية التعامل مع الملفات في بايثون باستخدام الدالة `open()`. رأينا الأوضاع المختلفة لفتح الملفات مثل القراءة، الكتابة، الإلحاق، وإنشاء ملفات جديدة. كما تعلمنا كيفية قراءة الملفات بطرق متعددة سواء كان النص بالكامل أو جزء منه أو سطر سطر. وأخيرًا، تعرفنا على كيفية إغلاق الملفات يدويًا أو تلقائيًا باستخدام `with`.

